<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html><head>

                        
  
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

                        
  
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

                        
  
  <meta name="GENERATOR" content="Mozilla/4.79 [en] (X11; U; Linux 2.4.18-3 i686) [Netscape]">

  
  <title>ArcVIEW_Fits_Keys.html</title></head>
<body>

      <b><u>&nbsp;</u><big><big><font size="+1"><big><big>GFITS header template</big></big></font></big></big></b>
  
<p></p>

   
<p>All the FITS headers generated by GFITS&nbsp; must be described on a header
file template. This template specifies the order, names, comments and where
to get the values (or the actual values if they are fixed ones). If using&nbsp;
multiple extensions fits file images, then it can be described  a diferent
set of keywords for each extension (if desired). </p>

     
<p>GFITS reads the template file, and at the moment of generating the
image it will add the specified keywords, taking the current values of
the variables from the specified source. Note that all these keywords
can be modified on the fly through command line -this includes the
actual edition of the template on disk </p>

   <br>

   
<p><b><u><font size="+1">Header file template</font></u></b> </p>

     
<p>The header template is just a list of ascii lines, where each entry corresponds 
to a keyword: </p>

     
<p style="font-weight: bold;">KEYNAME='&lt;<big>expresio</big>n&gt;' /[<big>
comment</big>]&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;[timing_modifier] </p>

     
<p><big><span style="font-weight: bold; text-decoration: underline;">expresion</span><span style="font-weight: bold;"></span><span style="font-style: italic; font-weight: bold;">&nbsp;</span></big><span style="font-weight: bold;">&nbsp;</span>&nbsp; : corresponds to the source
where to get the value, or the value itself. Possible values are:&nbsp;</p>

   
<p> &nbsp;<big><b><i>dbs [2DARR] [name] &nbsp;[name_modifier]  :</i></b></big><br>

   Get the value from the internal PanVIEW database. This is the most usual
source. If a <span style="font-weight: bold; font-style: italic;">[name]</span>
 is specified then it will look for the value of that variable on the database.
If the name is omitted it will assume that the name of the variable is the
same name as the KEYNAME specified. A list of some usual internal variables (not
complete) can be found at the end of this document. The keyword type will
be that of the variable type on the internal database. ANY internal variable
can be used, including all of those set externally by the user (thorugh "dbs", or "app set" commands)<br>

 <span style="font-weight: bold; font-style: italic;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [name_modifier] </span><span style="font-weight: bold;"></span>is an optional parameter valid only if
the <span style="font-weight: bold; font-style: italic;">[2DARR] </span>datatype 
is specified. In this case, the "name_modifier" can modify the name of each
of the keynames of teh 2DARR. Valid modifiers are:<br>

 __ADDSUFF__ &lt;sufix&gt; : adds the specified suffix to all the keynames
on the 2D array<br>

 __ADDPREF__ &lt;prefix&gt;: adds the specified prefix to all the keynames
on the 2D array.<br>

 </p>

 
<p><big><span style="font-weight: bold; font-style: italic;">queue:</span></big><br>
This field is associated with variables that are "queued". There are
not many of these, but a couple of important one need these. See below,
in the examples section<br>

   <br>

   <big><i>[(]</i><b><i> datatype</i></b><span style="font-weight: bold;">[</span><span style="font-style: italic; font-weight: bold;">)</span><span style="font-weight: bold;">]</span> &lt;<span style="font-weight: bold; font-style: italic;">value</span>&gt;:</big><br>

   Will take "<span style="font-style: italic; font-weight: bold;">value</span>
" and will add it according  to the datatype specified. If not datatype specified,
it will assume "STRING". Possible datatypes: <br>
U32 (ULONG), U16 (UINT), U8 (BYTE), I32 (LONG), I16 (INT), I8 (SHORT),
FLOAT, DOUBLE, STR (STRING), 2DARR (two-dimensional arrays) (N lines of
key/value/comments), and 3DARR (three dumensional arrays) (Z extensions
of N lines of key/value/comment)<br>

   where U: unsigned, I: signed. FLOAT is 32 bits, DOUBLE is 64 bits.&nbsp;<br>

   The <span style="font-weight: bold; font-style: italic;">datatype</span>
can have parenthesis surrounding it, as in a C typecast ( for example
(float)
2.5). Note that when 2D or 3D arrays are used, the use can also specify
an specific line from the array using [] brackets. For example</p><p>CCDTEMP = 'dbs 2DARR TPCTRLINFO[2]'&nbsp; /*this will add here only the thirst (0-based) row of the 2D array*/</p><p>In this way even the rows of a&nbsp; 2D or 3D array can be separated in the final header</p><p><i><b><br><big>

   file </big></b></i><big><b style="font-weight: bold; font-style: italic;">&lt;</b><span style="font-weight: bold; font-style: italic;">path</span><b style="font-weight: bold; font-style: italic;">&gt;</b></big><i><b><big>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</big>&nbsp;&nbsp;&nbsp;<br>

   </b></i>Get the specified file and append it to the headers. These are
called "auxiliar header files". See the explanation on <a href="#auxiliar_file_templates">auxiliar header files</a> below

   <big><span style="font-weight: bold; text-decoration: underline;"></span></big></p><p></p><p><big style="font-style: italic;"><span style="font-weight: bold;">evaluate [(datatype)] &lt;exp1&gt; &lt;op1&gt; &lt;exp2&gt; [&lt;exp3&gt; &lt;op2&gt; .....]</span></big></p><p>evaluates,
on the fly, the given expression. The result will be added to the
headers acording to the datatype specified. If no datatype is
specified, it will be STR</p><p>where:</p><p>&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; datatype: data type of the
result. Any supported datatyoe (INT, FLOAT, etc)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; expN can be:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; - a direct numerical value. Example: 42<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; - an enviromental variable. Example: ${MYVAR}<br>&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; - a &nbsp;command line argument.
Example: $ARG(-myval) (assuming at startup it was passed "..-myval 31"<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; - an internal database variable value. Example: dbs (exptime)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; opM can be:<br>&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; addition (+), sustraction (-),
multiplication (*), division (/), logarithm (log), exponent (^)<br>&nbsp; Example:<br>&nbsp;&nbsp;&nbsp; CRPIX1 = '_evaluate_ 2 * dbs (detcols) &nbsp; ' / 2 * size of the detector in X<br>&nbsp;&nbsp;&nbsp;
PIXSCALE = '_evaluate_ ${MYSCALE} * dbs (pixsize) ' / evaluates the
env. variable and mult by "pixsize" internal database value</p><p>&nbsp;
&nbsp; MYARG &nbsp;= '_evaluate_ (FLOAT) $ARG{-myarg} * 10 ' / if
passed value (startup) was "-myarg 21", this will write 210 as float</p><p><i><b>&nbsp; &nbsp;</b></i><big><span style="font-weight: bold; text-decoration: underline;"><br>comment</span><span style="font-weight: bold;"></span></big>: the comment
that will appear on the correspondent  keyword </p>

     
<p><span style="font-style: italic; text-decoration: underline; font-weight: bold;"></span><big><span style="font-weight: bold;"><span style="text-decoration: underline;">timming_modifier</span>:&nbsp;</span><small>The GFITS
module can write keywords prior or after the data has been writting, or both.
By default it follows the directive given on the <a href="GFITS_Command_Interface.html#configfile">configuration file </a>(headiming 
key), but these modifier can override the directive only for the specified
keyword. This allows to write some header info at diferent times. The available
value for this directive are:<br>

 __BEFORE__ : write the keyword before writting the data<br>

 __AFTER__: write the keyword after writting the data</small></big></p>

 
<p><big><span style="font-weight: bold;"></span></big></p>

   
<p><span style="font-style: italic; text-decoration: underline; font-weight: bold;"><a name="example"></a>Example:</span></p>

     
<p><i><font size="-1"><b>OBJECT&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ='dbs
title &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ' /object
title</font></i> &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; /*gets the value
of the internal dbs (database) variable "title" and place the value there*/<br>

     <i><font size="-1"><b>SOFTVER&nbsp;&nbsp;&nbsp;</b> ='dbs app_ver &nbsp;&nbsp;&nbsp;
 ' /software version</font></i> &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp; &nbsp;<br>

     <i><font size="-1"><b>HDR_REV</b>&nbsp;&nbsp; ='dbs &nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;  ' /header revision</font></i>
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
/*gets the value of the internal dbs (database) variable "hdr_rev" and place
it here<br>

     <i><font size="-1"><b>OBSERVER</b>='dbs &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ' /observer</font></i>
<br>

     <i><font size="-1"><b>UTSHUT&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp; ='queue &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 ' /UT shutter open</font></i> &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp; /*this is the time where the shutter opens. It has to
say "queue"<br>

     <i><font size="-1"><b>EXPTIME</b>&nbsp;&nbsp;&nbsp; ='dbs &nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ' /exposure time (secs)</font></i>
 <br>

     <i><font size="-1"><b>NAMPSXY</b> &nbsp; ='dbs &nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;  ' /number of amplifiers in
x y</font></i> <br>

     <i><font size="-1"><b>CCDSUM&nbsp;</b>&nbsp;&nbsp;&nbsp; ='dbs &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  ' /binning in x y</font></i> <br>

     <i><font size="-1"><b>GEOMETRY</b>='queue &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 ' /FPA geometry</font></i> &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; /*geometry information, usually taken
from also from some template parsed by the GEOM module*/<br>

     <i><font size="-1"><b>TCSINFO</b>&nbsp;&nbsp;&nbsp;&nbsp; ='dbs 2DARR
TCSINFO &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ' /info from the
TCS &nbsp; &nbsp;__BEFORE__&nbsp;</font></i>&nbsp; &nbsp;&nbsp;&nbsp; /*TCS
information. The modifier __BEFORE__ tells the module to write this info
before starting with the data write*/<br>

     <i><font size="-1"><b>FILTINFO&nbsp;&nbsp; </b>='dbs &nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;  ' /filter position/ID</font></i>
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; /*filter information*/<br>

     <i><font size="-1"><b>COMMENT</b> ='dbs &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  ' /any comment</font></i> &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;<br>

     <font size="-1"><b><i>CCDTEMP</i></b>&nbsp;&nbsp; = <i>'(FLOAT) 112.5
' /celcious degrees</i></font> &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;  /* will write 112.5 as float*/<br>

     <i><font size="-1"><b>ANYKEY</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 'any
comment'&nbsp;&nbsp;&nbsp; / if&nbsp; no datatype&nbsp; specified, it will
be added as string.</font></i>  <br>

     <i><font size="-1"><b>FILEINFO&nbsp;&nbsp; </b>=<b>'</b>file &lt;expresion&gt;<b>
 '&nbsp;&nbsp;&nbsp; /</b>appended file header</font></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 /*see explanation on this field below*/ <br>

     &nbsp;</p>

  
<p>    </p>

     
<p><b><i><u><font size="+1">Special Keywords</font></u></i></b> </p>

     
<p><b><a name="auxiliar_file_templates"></a>FILEINFO</b> (<span style="font-weight: bold;">auxiliar file templates</span>)<br>

     <b>sintax</b>:<b><i><font size="-1"> FILEINFO = 'file &lt;expesion&gt;'&nbsp;&nbsp;&nbsp;
 /[comment]</font></i></b> <br>

     Specifies a file or a set of files with extra information to be added
to the headers. The value of <i style="font-style: italic; font-weight: bold;">&lt;expresion</i><span style="font-style: italic; font-weight: bold;">&gt;</span> can correspond
to an specific file or to multiples ones using wildcats. All the specified
sintax and rules explained before also apply&nbsp; for these auxiliar file 
templates. These kind of files are commonly used when an external applcation
wants to update the headers dinamically, so it updates the auxiliar template
without the need of sending commands to the GFITS module or risking editing
the main template file. &nbsp;The aux files can also be changed on the fly trhough command line. See the command list</p>

   
<p> Examples are: </p>

     
<p><font size="-1"><b><i>a) FILEINFO</i></b> = '<i>file /home/instruments/config/weather.hdr'</i></font>
  <br>

     <font size="-1"><b><i>&nbsp;&nbsp;&nbsp;&nbsp; FILEINFO</i></b> = <i>
'file  /home/instruments/config/temperatures.hdr'</i></font> </p>

     
<p>In this case the content of both files will be added to the headers.&nbsp;
</p>

     
<p><font size="-1"><b><i>b) FILEINFO</i></b> = <i>'file /home/instruments/config/*.hdr'</i></font>
  </p>

     
<p>In this all the files with an "hdr" extensions will be read an added to 
the headers &nbsp;&nbsp;</p>

 
<p></p>

 
<p><b>GEOMETRY</b> <br>
The Keyword "GEOMETRY" it is&nbsp; saying "add the keywords which
describes the geometry of the array". Currently there are two sets of WCS
keywords provided:&nbsp; NOAO and NOAO_DES.&nbsp;&nbsp;A complete description
of these keywords exists on the "NOAO-Mosaic Geometry keywords"
document.</p>

     
<p>The type of Information that the GEOMETRY will add can be customized editing 
the GEOMETRY headers template file.<br>

     &nbsp; </p>

     
<p><b>UTSHUT</b> <br>
The UTSHUT keyword is provided by PanVIEW, and it is computed at the
moment in which the controller&nbsp; started the exposure. This is time
is usually very precise (the presicion depends of course, on the actual
mechanism for opening the shutter on the specific hardware)<br>

     UTSHUT has the following format: YYYY-mm-ddTHH:MM:SS.msmsms <br>

     where <br>

     YYYY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : four digits year <br>

     mm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : two
digits 01-12 month <br>

     dd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 : two digits 01-31 day <br>

     T&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 : standard date-time separator <br>

     HH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : two
digits 00-23 hour <br>

     MM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : two digit 00-59
minutes  <br>

     SS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
: two digits 00-59 seconds <br>

     msmsms&nbsp; : three digits 000-999&nbsp; milliseconds </p>

     
<p>The value should have a precision of about 1-2 ms relative to the local
host time.  <br>

     &nbsp; </p>

     
<p><b><i><u><font size="+1"><a name="mext_template"></a>Multiextension Images</font></u></i></b>
 <br>

     If a multiextension fits format is used, then it is possible to specify
a diferent set of keyword for each extension, using the following convention:
 </p>

     
<p><b><i>[&lt;expresion1&gt;]</i></b> <br>

     <i>Keywords</i> <br>

     .... <br>

     <b><i>[&lt;expresion2&gt;]</i></b> <br>

     <i>Keywords2</i> <br>

     ..... </p>

     
<p>where <i>expresion</i> can be: </p>

     
<p><i>number</i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
: extension
number&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/*add to extension <i>number</i> all the keywords specified untill the next 
[ ] expresion*/ <br>

     <i>number1-number2</i>: from extension <i>number1</i> to extension <i>
number2</i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /*add the next keywords
to all extension between <i>number1</i> and <i>number2</i>*/ <br>

     <i>number1-*</i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 : from extension <i>number1</i>to
the
end&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/*add the next keywords to all the extensions from <i>number1</i> (inclusive)
 to the end*/ <br>

     <i>*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</i>: all the extensions </p>

     
<p>If no <i>&lt;expresion&gt;</i> (neither brackets) is given,&nbsp; the specified&nbsp;
set of keywords&nbsp; will be added to all the extensions of the image.&nbsp;</p>

  
<p>Using the "quickheaders" (see the <a href="GFITS_Command_Interface.html#SET">SET QHDRS</a> command) is the same
as having a template that have all the enries on the extension 0, and then
only the geometry informatiin in the others, like</p>

   
<p>[0]<br>

 KEYWORD1=VAL...</p>

  
<p>...&nbsp;&nbsp;</p>

  
<p>KEYWORDN=VALN...</p>

   
<p><br>

  [1-*]<br>

 GEOMETRY='queue' /geometry information</p>

 <big><big></big></big> 
<p style="font-weight: bold;"><big><big>Some useful internal variables</big></big></p>

 
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

   <tbody>

     <tr>

       <td><span style="font-weight: bold;">Name</span></td>

       <td><span style="font-weight: bold;">type</span></td>

       <td><span style="font-weight: bold;">obs</span></td>

     </tr>

     <tr>

       <td>title</td>

       <td>string</td>

       <td>image title</td>

     </tr>

     <tr>

       <td>observer</td>

       <td>string</td>

       <td>observer(s) name (s)</td>

     </tr>

     <tr>

       <td>obstype</td>

       <td>string</td>

       <td>observation type (dark, zero, object, etc)</td>

     </tr>

     <tr>

       <td>aexptime</td>

       <td>float</td>

       <td>actual&nbsp; exposure time of the image. This is the true "integration
time" that the frame had</td>

     </tr>

     <tr>

       <td>exptime</td>

       <td>float</td>

       <td>requested exposure time. This is the time that was originally requested.
It may be diferent to exptime if the client aborted or stoped the image</td>

     </tr>

     <tr>

       <td>totexp</td>

       <td>float</td>

       <td>tottal exposure time in a "sample up the ramp" sequence (NIR only).
This is the "accumulated" exposure time</td>

     </tr>

     <tr>

       <td>absexp</td>

       <td>bool</td>

       <td>was the "integration time "corrected" to have always the same
"effective" exposure time (if using fowler, for example)</td>

     </tr>

     <tr>

       <td>detreadtime</td>

       <td>float</td>

       <td>detector total readout time</td>

     </tr>

     <tr>

       <td>mext</td>

       <td>bool</td>

       <td>multiple or single extensions (flat) fits file</td>

     </tr>

     <tr>

       <td>coadds</td>

       <td>int</td>

       <td>number of coadds (NIR only)</td>

     </tr>

     <tr>

       <td>fowler</td>

       <td>int</td>

       <td>number of fowler samples (NIR only)</td>

     </tr>

     <tr>

       <td>ccdsum</td>

       <td>string</td>

       <td>binning in x y (CCDs only)</td>

     </tr>

     <tr>

       <td>nampsxy</td>

       <td>string</td>

       <td>number of amplifiers in x y</td>

     </tr>

     <tr><td>totnamps</td><td>int</td><td>total number of amplifiers</td></tr><tr><td>num_ext</td><td>int</td><td>number of extensions of fits file</td></tr><tr>

       <td>app_ver</td>

       <td>string</td>

       <td>application software version</td>

     </tr>

     <tr>

       <td>hdr_rev</td>

       <td>string</td>

       <td>GFITS module revision</td>

     </tr>

     <tr>

       <td>dhe_ver</td>

       <td>string</td>

       <td>dhe firmware&nbsp;</td>

     </tr>

     <tr>

       <td>comment</td>

       <td>string</td>

       <td>comment</td>

     </tr>

     <tr>

       <td>GEOMETRY</td>

       <td>database</td>

       <td>add geometry information (on GEOMETRY template file)</td>

     </tr>

     <tr>

       <td>UTSHUT</td>

       <td>database</td>

       <td>add time when integration started (shutter opened, if there is
a shutter)</td>

     </tr>

   
  
  </tbody> 
</table>

 
<p><br>

 Note that this are the most commonly used keys, but many modules may have
also headers available, and in many cases the headers for these modules are
also customizable trought templates. This information should be available
for the correspondent module. The modules usualy implement the headers as
2D strings arrays that goes directly to the internal database. The module
itself creates the 2D table (usually based on templates), and place it in
the database. Then the GFITS module can take them from there. For specifing
a 2D variable, the "type" should say "2DARR"<br>

 (see the TCSINFO key on the above <a href="#example">example</a>). Examples
of this are DHEINFO (dhe module information, which may have temperatures,
power supplies, etc), TCSINFO (TCS module information), FLTINFO (filter information),
etc.</p>

 
<p><span style="font-weight: bold; text-decoration: underline;">some "special"
cases:</span></p>

 
<p> a) You want to evaluate the value of a variable before and after the
exposure.</p>

 
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; add two separate entries with
diferent KEY names, but with the same "data source", pointing to the desired
variable. Then add "timming modifiers" to one (or both) in order to get the
value before and after.<br>

 <br>

 &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; TEMP1 = 'dbs ccdtemp'
/ ccd temperature before exposure &nbsp; &nbsp; &nbsp;__BEFORE__<br>

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TEMP2='dbs ccdtemp' / ccd temperature
after exposure &nbsp; &nbsp;__AFTER__</p>

 
<p>Note that if the default timing was, for example, "before", then adding
the modifier to the first key does not adds anything (it does not hurts,
but it is not necessary)</p>

 
<p>b) You want to evaluate the value of external variables (from template)
before and after the exposition</p>

 
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-&gt; add two separate entries
calling the 2D variable using name modifiers, and also use timing modifiers
for one or both</p>

 
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; TEMPS = 'dbs
2DARR TPCTRL_INFO __ADDSUFF__ _I' / temperatures &nbsp; &nbsp; &nbsp; &nbsp;__BEFORE__
<br>

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TEMPS2='dbs 2DARR TPCTRL_INFO __ADDSUFF__
_F' / temperatures &nbsp; &nbsp; &nbsp; &nbsp; __AFTER__</p>

 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; If the the template for the
temperatures was, for example<br>

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MOUNT = 'tp CCDMOUNT' /mount temperature<br>

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NECK &nbsp; &nbsp;= 'tp NECHTEMP' / neck
temperature<br>

 <br>

 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; Then in the headers they
will appear as:<br>

 <br>

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MOUNT_I='161.08 ' /mount temperature<br>

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NECK_I='231.28' /mount temperature<br>

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MOUNT_F='161.05' /mount temperature<br>

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NECK_F='231.27' /neck temperature<br>

 <br>

 <br>

 
<p></p>

 
<p></p>

 
<p></p>

 
<p></p>

  
<p><br>

  &nbsp; </p>

     
</body></html>